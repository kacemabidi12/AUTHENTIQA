{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Downloads/AUTHENTIQA/client/src/pages/ScanEvents.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport { NotificationContext } from '../context/NotificationContext';\nimport Skeleton from '../components/Skeleton';\nimport useGet from '../hooks/useGet';\nimport { api } from '../api';\nimport './scanEvents.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScanEventDetails = /*#__PURE__*/React.lazy(_c = () => import('../components/ScanEventDetails'));\n_c2 = ScanEventDetails;\nfunction formatDate(d) {\n  if (!d) return '';\n  return new Date(d).toLocaleString();\n}\nfunction toCSV(rows) {\n  if (!rows || rows.length === 0) return '';\n  const keys = Object.keys(rows[0]);\n  const lines = [keys.join(',')];\n  for (const r of rows) {\n    const vals = keys.map(k => {\n      const v = r[k] == null ? '' : String(r[k]).replace(/\"/g, '\"\"');\n      return `\"${v}\"`;\n    });\n    lines.push(vals.join(','));\n  }\n  return lines.join('\\n');\n}\nexport default function ScanEvents() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const notify = useContext(NotificationContext);\n\n  // filters\n  const [q, setQ] = useState('');\n  const [universityId, setUniversityId] = useState('');\n  const [documentTypeId, setDocumentTypeId] = useState('');\n  const [resultLabel, setResultLabel] = useState('');\n  const [minRisk, setMinRisk] = useState('');\n  const [maxRisk, setMaxRisk] = useState('');\n  const [minConfidence, setMinConfidence] = useState('');\n  const [maxConfidence, setMaxConfidence] = useState('');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n  const [country, setCountry] = useState('');\n  const [city, setCity] = useState('');\n\n  // paging and sorting\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [sortBy, setSortBy] = useState('createdAt');\n  const [sortDir, setSortDir] = useState('desc');\n\n  // data\n  const {\n    data: universitiesData\n  } = useGet('/api/universities');\n  const universities = universitiesData && universitiesData.universities || [];\n  const [documentTypes, setDocumentTypes] = useState([]);\n\n  // useGet for scan events, but will call refetch manually\n  const {\n    data: scanPage,\n    loading,\n    error,\n    refetch\n  } = useGet('/api/scan-events', {\n    immediate: false,\n    params: {\n      page,\n      pageSize\n    }\n  });\n  useEffect(() => {\n    // if user is UNIVERSITY_ADMIN, preselect their university\n    if (user && user.role === 'UNIVERSITY_ADMIN' && user.universityId) {\n      setUniversityId(user.universityId);\n    }\n  }, [user]);\n\n  // fetch document types when university changes\n  useEffect(() => {\n    let canceled = false;\n    async function load() {\n      if (!universityId) {\n        setDocumentTypes([]);\n        setDocumentTypeId('');\n        return;\n      }\n      try {\n        const data = await api.get(`/api/universities/${universityId}/document-types`);\n        if (!canceled) setDocumentTypes(data.documentTypes || []);\n      } catch (err) {\n        console.error('Failed to load document types', err);\n        setDocumentTypes([]);\n      }\n    }\n    load();\n    return () => {\n      canceled = true;\n    };\n  }, [universityId]);\n\n  // build params memo\n  const params = useMemo(() => {\n    const p = {\n      q: q || undefined,\n      universityId: universityId || undefined,\n      documentTypeId: documentTypeId || undefined,\n      resultLabel: resultLabel || undefined,\n      minRiskScore: minRisk || undefined,\n      maxRiskScore: maxRisk || undefined,\n      minConfidence: minConfidence || undefined,\n      maxConfidence: maxConfidence || undefined,\n      dateFrom: dateFrom || undefined,\n      dateTo: dateTo || undefined,\n      country: country || undefined,\n      city: city || undefined,\n      page,\n      pageSize,\n      sortBy,\n      sortDir\n    };\n    return p;\n  }, [q, universityId, documentTypeId, resultLabel, minRisk, maxRisk, minConfidence, maxConfidence, dateFrom, dateTo, country, city, page, pageSize, sortBy, sortDir]);\n\n  // fetch data when params change\n  useEffect(() => {\n    refetch({\n      params\n    }).catch(() => {});\n  }, [refetch, JSON.stringify(params)]);\n  const items = scanPage && scanPage.items || [];\n  const total = scanPage && scanPage.total || 0;\n  function changeSort(column) {\n    if (sortBy === column) {\n      setSortDir(sortDir === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortBy(column);\n      setSortDir('desc');\n    }\n  }\n  async function exportCsv() {\n    // fetch all matching (use large pageSize) or fetch current page only — request asks current filtered results, we'll fetch all up to 5000\n    const fetchParams = {\n      ...params,\n      page: 1,\n      pageSize: 5000\n    };\n    try {\n      const res = await api.get('/api/scan-events', {\n        params: fetchParams\n      });\n      const rows = (res.items || []).map(r => ({\n        createdAt: r.createdAt,\n        universityId: r.universityId,\n        documentTypeId: r.documentTypeId,\n        resultLabel: r.resultLabel,\n        riskScore: r.riskScore,\n        confidence: r.confidence,\n        studentId: r.ocrFields && r.ocrFields.studentId,\n        name: r.ocrFields && r.ocrFields.name,\n        reasons: (r.reasons || []).join(';')\n      }));\n      const csv = toCSV(rows);\n      const blob = new Blob([csv], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `scan-events-${Date.now()}.csv`;\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      notify && notify.error('Failed to export CSV: ' + (err.message || err));\n    }\n  }\n  const [detailId, setDetailId] = useState(null);\n  // details will be handled by the side-drawer component\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"scan-events-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Scan Events\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Search docHash, studentId, name...\",\n          value: q,\n          onChange: e => setQ(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), user && user.role === 'SUPER_ADMIN' && /*#__PURE__*/_jsxDEV(\"select\", {\n          value: universityId,\n          onChange: e => setUniversityId(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Universities\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), universities.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: u._id,\n            children: u.name\n          }, u._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 38\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: documentTypeId,\n          onChange: e => setDocumentTypeId(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Document Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), documentTypes.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: d._id,\n            children: [d.name, \" \", d.version]\n          }, d._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 37\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: resultLabel,\n          onChange: e => setResultLabel(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Labels\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"AUTHENTIC\",\n            children: \"AUTHENTIC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"SUSPICIOUS\",\n            children: \"SUSPICIOUS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"FORGED\",\n            children: \"FORGED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => {\n            setPage(1);\n            refetch({\n              params\n            });\n          },\n          children: \"Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn outline\",\n          onClick: () => {\n            setQ('');\n            setUniversityId('');\n            setDocumentTypeId('');\n            setResultLabel('');\n            setMinRisk('');\n            setMaxRisk('');\n            setMinConfidence('');\n            setMaxConfidence('');\n            setDateFrom('');\n            setDateTo('');\n            setCountry('');\n            setCity('');\n            setPage(1);\n          },\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-controls\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: exportCsv,\n          children: \"Export CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-extended\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Risk Score range\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"min\",\n          value: minRisk,\n          onChange: e => setMinRisk(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"max\",\n          value: maxRisk,\n          onChange: e => setMaxRisk(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Confidence range\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          placeholder: \"min\",\n          value: minConfidence,\n          onChange: e => setMinConfidence(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.01\",\n          placeholder: \"max\",\n          value: maxConfidence,\n          onChange: e => setMaxConfidence(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Date from\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: dateFrom,\n          onChange: e => setDateFrom(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Date to\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: dateTo,\n          onChange: e => setDateTo(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Country\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: country,\n          onChange: e => setCountry(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"City\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: city,\n          onChange: e => setCity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-wrap\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"events-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              onClick: () => changeSort('createdAt'),\n              children: [\"Time \", sortBy === 'createdAt' ? sortDir === 'asc' ? '▲' : '▼' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"University\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Doc Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Label\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              onClick: () => changeSort('riskScore'),\n              children: [\"Risk \", sortBy === 'riskScore' ? sortDir === 'asc' ? '▲' : '▼' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              onClick: () => changeSort('confidence'),\n              children: [\"Confidence \", sortBy === 'confidence' ? sortDir === 'asc' ? '▲' : '▼' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Student ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Reasons\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: loading ? /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"8\",\n              children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                rows: 4,\n                cols: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this) : items.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"8\",\n              children: \"No results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this) : items.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n            onClick: () => setDetailId(r._id),\n            className: \"clickable\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: formatDate(r.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.universityId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.documentTypeId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.resultLabel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.riskScore\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.confidence\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.ocrFields && r.ocrFields.studentId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r.reasons && r.reasons.join(', ')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, r._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pagination\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn small\",\n        disabled: page <= 1,\n        onClick: () => setPage(p => Math.max(1, p - 1)),\n        children: \"Prev\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Page \", page]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn small\",\n        disabled: page * pageSize >= total,\n        onClick: () => setPage(p => p + 1),\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: pageSize,\n        onChange: e => setPageSize(Number(e.target.value)),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: 10,\n          children: \"10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 20,\n          children: \"20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: 50,\n          children: \"50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Total: \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), detailId && /*#__PURE__*/_jsxDEV(React.Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 35\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(ScanEventDetails, {\n        scanEventId: detailId,\n        onClose: () => setDetailId(null),\n        onCaseCreated: c => {/* optionally refresh list */}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n_s(ScanEvents, \"TsGZaSGoU+hd+6la7TsZlOl9bJ8=\", false, function () {\n  return [useGet, useGet];\n});\n_c3 = ScanEvents;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ScanEventDetails$React.lazy\");\n$RefreshReg$(_c2, \"ScanEventDetails\");\n$RefreshReg$(_c3, \"ScanEvents\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useMemo","AuthContext","NotificationContext","Skeleton","useGet","api","jsxDEV","_jsxDEV","ScanEventDetails","lazy","_c","_c2","formatDate","d","Date","toLocaleString","toCSV","rows","length","keys","Object","lines","join","r","vals","map","k","v","String","replace","push","ScanEvents","_s","user","notify","q","setQ","universityId","setUniversityId","documentTypeId","setDocumentTypeId","resultLabel","setResultLabel","minRisk","setMinRisk","maxRisk","setMaxRisk","minConfidence","setMinConfidence","maxConfidence","setMaxConfidence","dateFrom","setDateFrom","dateTo","setDateTo","country","setCountry","city","setCity","page","setPage","pageSize","setPageSize","sortBy","setSortBy","sortDir","setSortDir","data","universitiesData","universities","documentTypes","setDocumentTypes","scanPage","loading","error","refetch","immediate","params","role","canceled","load","get","err","console","p","undefined","minRiskScore","maxRiskScore","catch","JSON","stringify","items","total","changeSort","column","exportCsv","fetchParams","res","createdAt","riskScore","confidence","studentId","ocrFields","name","reasons","csv","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","now","click","revokeObjectURL","message","detailId","setDetailId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","u","_id","version","onClick","step","colSpan","cols","disabled","Math","max","Number","Suspense","fallback","scanEventId","onClose","onCaseCreated","c","_c3","$RefreshReg$"],"sources":["/Users/admin/Downloads/AUTHENTIQA/client/src/pages/ScanEvents.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useMemo } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport { NotificationContext } from '../context/NotificationContext';\nimport Skeleton from '../components/Skeleton';\nimport useGet from '../hooks/useGet';\nimport { api } from '../api';\nimport './scanEvents.css';\nconst ScanEventDetails = React.lazy(() => import('../components/ScanEventDetails'));\n\nfunction formatDate(d) {\n  if (!d) return '';\n  return new Date(d).toLocaleString();\n}\n\nfunction toCSV(rows) {\n  if (!rows || rows.length === 0) return '';\n  const keys = Object.keys(rows[0]);\n  const lines = [keys.join(',')];\n  for (const r of rows) {\n    const vals = keys.map(k => {\n      const v = r[k] == null ? '' : String(r[k]).replace(/\"/g, '\"\"');\n      return `\"${v}\"`;\n    });\n    lines.push(vals.join(','));\n  }\n  return lines.join('\\n');\n}\n\nexport default function ScanEvents() {\n  const { user } = useContext(AuthContext);\n  const notify = useContext(NotificationContext);\n\n  // filters\n  const [q, setQ] = useState('');\n  const [universityId, setUniversityId] = useState('');\n  const [documentTypeId, setDocumentTypeId] = useState('');\n  const [resultLabel, setResultLabel] = useState('');\n  const [minRisk, setMinRisk] = useState('');\n  const [maxRisk, setMaxRisk] = useState('');\n  const [minConfidence, setMinConfidence] = useState('');\n  const [maxConfidence, setMaxConfidence] = useState('');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n  const [country, setCountry] = useState('');\n  const [city, setCity] = useState('');\n\n  // paging and sorting\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [sortBy, setSortBy] = useState('createdAt');\n  const [sortDir, setSortDir] = useState('desc');\n\n  // data\n  const { data: universitiesData } = useGet('/api/universities');\n  const universities = (universitiesData && universitiesData.universities) || [];\n\n  const [documentTypes, setDocumentTypes] = useState([]);\n\n  // useGet for scan events, but will call refetch manually\n  const { data: scanPage, loading, error, refetch } = useGet('/api/scan-events', { immediate: false, params: { page, pageSize } });\n\n  useEffect(() => {\n    // if user is UNIVERSITY_ADMIN, preselect their university\n    if (user && user.role === 'UNIVERSITY_ADMIN' && user.universityId) {\n      setUniversityId(user.universityId);\n    }\n  }, [user]);\n\n  // fetch document types when university changes\n  useEffect(() => {\n    let canceled = false;\n    async function load() {\n      if (!universityId) {\n        setDocumentTypes([]);\n        setDocumentTypeId('');\n        return;\n      }\n      try {\n        const data = await api.get(`/api/universities/${universityId}/document-types`);\n        if (!canceled) setDocumentTypes(data.documentTypes || []);\n      } catch (err) {\n        console.error('Failed to load document types', err);\n        setDocumentTypes([]);\n      }\n    }\n    load();\n    return () => { canceled = true; };\n  }, [universityId]);\n\n  // build params memo\n  const params = useMemo(() => {\n    const p = { q: q || undefined, universityId: universityId || undefined, documentTypeId: documentTypeId || undefined, resultLabel: resultLabel || undefined, minRiskScore: minRisk || undefined, maxRiskScore: maxRisk || undefined, minConfidence: minConfidence || undefined, maxConfidence: maxConfidence || undefined, dateFrom: dateFrom || undefined, dateTo: dateTo || undefined, country: country || undefined, city: city || undefined, page, pageSize, sortBy, sortDir };\n    return p;\n  }, [q, universityId, documentTypeId, resultLabel, minRisk, maxRisk, minConfidence, maxConfidence, dateFrom, dateTo, country, city, page, pageSize, sortBy, sortDir]);\n\n  // fetch data when params change\n  useEffect(() => {\n    refetch({ params }).catch(() => {});\n  }, [refetch, JSON.stringify(params)]);\n\n  const items = (scanPage && scanPage.items) || [];\n  const total = (scanPage && scanPage.total) || 0;\n\n  function changeSort(column) {\n    if (sortBy === column) {\n      setSortDir(sortDir === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortBy(column);\n      setSortDir('desc');\n    }\n  }\n\n  async function exportCsv() {\n    // fetch all matching (use large pageSize) or fetch current page only — request asks current filtered results, we'll fetch all up to 5000\n    const fetchParams = { ...params, page: 1, pageSize: 5000 };\n    try {\n      const res = await api.get('/api/scan-events', { params: fetchParams });\n      const rows = (res.items || []).map(r => ({\n        createdAt: r.createdAt,\n        universityId: r.universityId,\n        documentTypeId: r.documentTypeId,\n        resultLabel: r.resultLabel,\n        riskScore: r.riskScore,\n        confidence: r.confidence,\n        studentId: r.ocrFields && r.ocrFields.studentId,\n        name: r.ocrFields && r.ocrFields.name,\n        reasons: (r.reasons || []).join(';')\n      }));\n      const csv = toCSV(rows);\n      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `scan-events-${Date.now()}.csv`;\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      notify && notify.error('Failed to export CSV: ' + (err.message || err));\n    }\n  }\n\n  const [detailId, setDetailId] = useState(null);\n  // details will be handled by the side-drawer component\n\n  return (\n    <div className=\"scan-events-page\">\n      <h2>Scan Events</h2>\n\n      <div className=\"controls\">\n        <div className=\"left-controls\">\n          <input placeholder=\"Search docHash, studentId, name...\" value={q} onChange={e => setQ(e.target.value)} />\n\n          {user && user.role === 'SUPER_ADMIN' && (\n            <select value={universityId} onChange={e => setUniversityId(e.target.value)}>\n              <option value=\"\">All Universities</option>\n              {universities.map(u => <option key={u._id} value={u._id}>{u.name}</option>)}\n            </select>\n          )}\n\n          <select value={documentTypeId} onChange={e => setDocumentTypeId(e.target.value)}>\n            <option value=\"\">All Document Types</option>\n            {documentTypes.map(d => <option key={d._id} value={d._id}>{d.name} {d.version}</option>)}\n          </select>\n\n          <select value={resultLabel} onChange={e => setResultLabel(e.target.value)}>\n            <option value=\"\">All Labels</option>\n            <option value=\"AUTHENTIC\">AUTHENTIC</option>\n            <option value=\"SUSPICIOUS\">SUSPICIOUS</option>\n            <option value=\"FORGED\">FORGED</option>\n          </select>\n\n          <button className=\"btn\" onClick={() => { setPage(1); refetch({ params }); }}>Apply</button>\n          <button className=\"btn outline\" onClick={() => { setQ(''); setUniversityId(''); setDocumentTypeId(''); setResultLabel(''); setMinRisk(''); setMaxRisk(''); setMinConfidence(''); setMaxConfidence(''); setDateFrom(''); setDateTo(''); setCountry(''); setCity(''); setPage(1); }}>Reset</button>\n        </div>\n\n        <div className=\"right-controls\">\n          <button className=\"btn\" onClick={exportCsv}>Export CSV</button>\n        </div>\n      </div>\n\n      <div className=\"filters-extended\">\n        <label>Risk Score range\n          <input type=\"number\" placeholder=\"min\" value={minRisk} onChange={e => setMinRisk(e.target.value)} />\n          <input type=\"number\" placeholder=\"max\" value={maxRisk} onChange={e => setMaxRisk(e.target.value)} />\n        </label>\n        <label>Confidence range\n          <input type=\"number\" step=\"0.01\" placeholder=\"min\" value={minConfidence} onChange={e => setMinConfidence(e.target.value)} />\n          <input type=\"number\" step=\"0.01\" placeholder=\"max\" value={maxConfidence} onChange={e => setMaxConfidence(e.target.value)} />\n        </label>\n        <label>Date from\n          <input type=\"date\" value={dateFrom} onChange={e => setDateFrom(e.target.value)} />\n        </label>\n        <label>Date to\n          <input type=\"date\" value={dateTo} onChange={e => setDateTo(e.target.value)} />\n        </label>\n        <label>Country\n          <input value={country} onChange={e => setCountry(e.target.value)} />\n        </label>\n        <label>City\n          <input value={city} onChange={e => setCity(e.target.value)} />\n        </label>\n      </div>\n\n      <div className=\"table-wrap\">\n        <table className=\"events-table\">\n          <thead>\n            <tr>\n              <th onClick={() => changeSort('createdAt')}>Time {sortBy === 'createdAt' ? (sortDir === 'asc' ? '▲' : '▼') : ''}</th>\n              <th>University</th>\n              <th>Doc Type</th>\n              <th>Label</th>\n              <th onClick={() => changeSort('riskScore')}>Risk {sortBy === 'riskScore' ? (sortDir === 'asc' ? '▲' : '▼') : ''}</th>\n              <th onClick={() => changeSort('confidence')}>Confidence {sortBy === 'confidence' ? (sortDir === 'asc' ? '▲' : '▼') : ''}</th>\n              <th>Student ID</th>\n              <th>Reasons</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr><td colSpan=\"8\"><Skeleton rows={4} cols={8} /></td></tr>\n            ) : items.length === 0 ? (\n              <tr><td colSpan=\"8\">No results</td></tr>\n            ) : items.map(r => (\n              <tr key={r._id} onClick={() => setDetailId(r._id)} className=\"clickable\">\n                <td>{formatDate(r.createdAt)}</td>\n                <td>{r.universityId}</td>\n                <td>{r.documentTypeId}</td>\n                <td>{r.resultLabel}</td>\n                <td>{r.riskScore}</td>\n                <td>{r.confidence}</td>\n                <td>{r.ocrFields && r.ocrFields.studentId}</td>\n                <td>{r.reasons && r.reasons.join(', ')}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <div className=\"pagination\">\n        <button className=\"btn small\" disabled={page <= 1} onClick={() => setPage(p => Math.max(1, p-1))}>Prev</button>\n        <span>Page {page}</span>\n        <button className=\"btn small\" disabled={page * pageSize >= total} onClick={() => setPage(p => p+1)}>Next</button>\n        <select value={pageSize} onChange={e => setPageSize(Number(e.target.value))}>\n          <option value={10}>10</option>\n          <option value={20}>20</option>\n          <option value={50}>50</option>\n        </select>\n        <span>Total: {total}</span>\n      </div>\n\n      {detailId && (\n        <React.Suspense fallback={<div /> }>\n          <ScanEventDetails scanEventId={detailId} onClose={() => setDetailId(null)} onCaseCreated={(c) => { /* optionally refresh list */ }} />\n        </React.Suspense>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}